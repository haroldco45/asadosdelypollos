<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asados DelyPollos - Factura Digital</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --rojo: #d32f2f; --verde: #25d366; --verde-boton: #4caf50; --gris-fondo: #f4f4f4; }
        body { font-family: 'Roboto', sans-serif; margin: 0; background-color: var(--gris-fondo); display: flex; justify-content: center; }
        .app-container { width: 100%; max-width: 450px; background: white; min-height: 100vh; padding-bottom: 50px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        
        /* Cabecera */
        .info-header { background: #fff; padding: 10px; text-align: center; font-size: 11px; border-bottom: 1px solid #ddd; }
        header { background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=500'); background-size: cover; height: 140px; display: flex; justify-content: center; align-items: center; }
        .logo { max-width: 180px; filter: drop-shadow(2px 2px 4px #000); }

        /* Categor√≠as */
        .categories { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 15px; }
        .cat-btn { padding: 10px; border: none; border-radius: 5px; color: white; font-weight: bold; font-size: 10px; cursor: pointer; text-transform: uppercase; }
        .cat-btn.active { background-color: var(--rojo); }
        .cat-btn.inactive { background-color: var(--verde-boton); }

        /* Productos */
        .products-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; padding: 0 15px; }
        .product-card { background-color: var(--rojo); color: white; padding: 12px; border-radius: 10px; text-align: center; cursor: pointer; }
        .product-name { font-size: 11px; font-weight: bold; height: 30px; display: flex; align-items: center; justify-content: center; }
        .product-price { font-size: 15px; display: block; margin-top: 5px; font-weight: bold; }

        /* Formularios */
        .form-section { padding: 15px; background: #fff; border-top: 5px solid var(--gris-fondo); }
        .input-group { margin-bottom: 12px; }
        .input-group label { display: block; font-size: 12px; margin-bottom: 4px; font-weight: bold; }
        .input-group input, .input-group select, .input-group textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        
        /* Carrito / Factura */
        .cart-section { padding: 15px; background: #fff; border-top: 5px solid var(--gris-fondo); }
        .cart-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; border-bottom: 1px dashed #eee; padding-bottom: 8px; }
        .item-val-unit { font-size: 11px; color: #666; }
        
        .qty-controls { display: flex; align-items: center; gap: 8px; }
        .qty-box { width: 30px; text-align: center; border: 1px solid #ccc; border-radius: 4px; font-weight: bold; font-size: 14px; }
        .qty-btn { background: var(--verde-boton); border: none; color: white; width: 28px; height: 28px; border-radius: 4px; cursor: pointer; font-weight: bold; }

        .total-box { background: #f9f9f9; padding: 15px; border-radius: 8px; margin-top: 10px; text-align: right; }
        .btn-whatsapp { width: 100%; padding: 18px; background-color: var(--verde); color: white; border: none; border-radius: 10px; font-weight: bold; font-size: 16px; cursor: pointer; margin-top: 15px; display: none; }
        
        footer { text-align: center; padding: 30px 20px; font-size: 12px; color: #888; border-top: 1px solid #eee; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="info-header">üìç Frente al estadio de f√∫tbol, Caucasia | üìû 3117700431</div>
    <header><img src="ASADOS-DELYPOLLOS.PNG" alt="DelyPollos" class="logo"></header>

    <div class="categories">
        <button class="cat-btn active" onclick="cambiarCategoria('BROASTER', this)">Broaster</button>
        <button class="cat-btn inactive" onclick="cambiarCategoria('ASADO', this)">Asado</button>
        <button class="cat-btn inactive">Bandejas</button>
        <button class="cat-btn inactive">Bebidas</button>
        <button class="cat-btn inactive">Sopas</button>
        <button class="cat-btn inactive">Postres</button>
    </div>

    <div id="categoria-actual" style="padding: 10px 15px; font-weight: bold; text-transform: uppercase; color: #444;">Categor√≠a: Broaster</div>
    <div class="products-grid" id="menu-container"></div>

    <div class="form-section">
        <strong style="font-size: 14px; color: var(--rojo);">DATOS DE ENTREGA</strong>
        <div style="margin-top: 10px;">
            <div class="input-group"><label>Nombre y Apellido:</label><input type="text" id="nombre"></div>
            <div class="input-group"><label>Direcci√≥n (Barrio/Apto):</label><input type="text" id="direccion"></div>
            <div class="input-group"><label>Tel√©fono Celular:</label><input type="tel" id="tel-cliente"></div>
            <div class="input-group">
                <label>Forma de Pago:</label>
                <select id="forma-pago">
                    <option value="Efectivo">Efectivo</option>
                    <option value="Transferencia Bancaria">Transferencia Bancaria</option>
                    <option value="Dat√°fono">Dat√°fono</option>
                </select>
            </div>
            <div class="input-group">
                <label>Observaciones (OBS):</label>
                <textarea id="observaciones" rows="2" placeholder="Ej: Sin cebolla, traer cambio de $50.000..."></textarea>
            </div>
        </div>
    </div>

    <div class="cart-section">
        <strong style="font-size: 14px;">RESUMEN DE FACTURA</strong>
        <div id="cart-list" style="margin-top: 10px;"></div>
        <div id="resumen-valores" class="total-box" style="display: none;">
            <div style="font-size: 14px; margin-bottom: 5px;">Subtotal: <span id="subtotal-val">$0</span></div>
            <div style="font-weight: bold; font-size: 20px; color: var(--rojo);">
                TOTAL A PAGAR: <span id="total-val">$0</span>
            </div>
            <button id="send-btn" class="btn-whatsapp" onclick="enviarPedido()">GENERAR PEDIDO WHATSAPP</button>
        </div>
    </div>

    <footer>
        ¬°Gracias por elegir Asados DelyPollos!<br><br>
        App desarrollada por <strong>VIBRAS POSITIVAS</strong>
    </footer>
</div>

<script>
    const menuData = {
        'BROASTER': [
            { id: 1, nombre: "POLLO ENTERO BROASTER", precio: 48000 },
            { id: 2, nombre: "1/2 POLLO BROASTER", precio: 24000 },
            { id: 3, nombre: "1/4 PERNIL BROASTER", precio: 13000 },
            { id: 4, nombre: "1/4 PECHUGA BROASTER", precio: 15000 },
            { id: 5, nombre: "PECHUGA BROASTER", precio: 12000 },
            { id: 6, nombre: "ALA BROASTER", precio: 7000 },
            { id: 7, nombre: "CONTRAMUSLO BROASTER", precio: 7000 },
            { id: 8, nombre: "MUSLO BROASTER", precio: 6000 }
        ],
        'ASADO': [
            { id: 9, nombre: "POLLO ENTERO ASADO", precio: 48000 },
            { id: 10, nombre: "1/2 POLLO ASADO", precio: 24000 },
            { id: 11, nombre: "1/4 PERNIL ASADO", precio: 13000 },
            { id: 12, nombre: "1/4 PECHUGA ASADO", precio: 15000 }
        ]
    };

    let carrito = [];
    let catActual = 'BROASTER';

    window.onload = () => {
        const saved = ['nombre', 'direccion', 'tel-cliente'];
        saved.forEach(f => { if(localStorage.getItem(f)) document.getElementById(f).value = localStorage.getItem(f); });
        renderMenu();
    };

    function cambiarCategoria(cat, btn) {
        catActual = cat;
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.replace('active', 'inactive'));
        btn.classList.replace('inactive', 'active');
        document.getElementById('categoria-actual').innerText = `Categor√≠a: ${cat}`;
        renderMenu();
    }

    function renderMenu() {
        document.getElementById('menu-container').innerHTML = menuData[catActual].map(p => `
            <div class="product-card" onclick="agregarAlCarrito(${p.id})">
                <div class="product-name">${p.nombre}</div>
                <span class="product-price">$${p.precio.toLocaleString()}</span>
            </div>
        `).join('');
    }

    function agregarAlCarrito(id) {
        let prod;
        for (let cat in menuData) {
            const found = menuData[cat].find(p => p.id === id);
            if (found) { prod = found; break; }
        }
        const item = carrito.find(i => i.id === id);
        if (item) item.cantidad++;
        else carrito.push({ ...prod, cantidad: 1 });
        actualizarUI();
    }

    function modQty(id, delta) {
        const item = carrito.find(i => i.id === id);
        if (item) {
            item.cantidad += delta;
            if (item.cantidad <= 0) carrito = carrito.filter(i => i.id !== id);
        }
        actualizarUI();
    }

    function actualizarUI() {
        const lista = document.getElementById('cart-list');
        const resumen = document.getElementById('resumen-valores');
        if (carrito.length === 0) {
            lista.innerHTML = '<p style="color: #999; font-size: 13px;">El carrito est√° vac√≠o.</p>';
            resumen.style.display = 'none';
            return;
        }
        resumen.style.display = 'block';
        document.getElementById('send-btn').style.display = 'block';
        let total = 0;
        lista.innerHTML = carrito.map(item => {
            const sub = item.precio * item.cantidad;
            total += sub;
            return `
                <div class="cart-item">
                    <div>
                        <strong>${item.nombre}</strong><br>
                        <span class="item-val-unit">$${item.precio.toLocaleString()} c/u</span>
                    </div>
                    <div class="qty-controls">
                        <button class="qty-btn" onclick="modQty(${item.id}, -1)">-</button>
                        <div class="qty-box">${item.cantidad}</div>
                        <button class="qty-btn" onclick="modQty(${item.id}, 1)">+</button>
                    </div>
                </div>`;
        }).join('');
        document.getElementById('subtotal-val').innerText = `$${total.toLocaleString()}`;
        document.getElementById('total-val').innerText = `$${total.toLocaleString()}`;
    }

    function enviarPedido() {
        const n = document.getElementById('nombre').value;
        const d = document.getElementById('direccion').value;
        const t = document.getElementById('tel-cliente').value;
        const pago = document.getElementById('forma-pago').value;
        const obs = document.getElementById('observaciones').value;

        if(!n || !d || !t) return alert("Por favor, complete sus datos de entrega.");

        localStorage.setItem('nombre', n);
        localStorage.setItem('direccion', d);
        localStorage.setItem('tel-cliente', t);

        let msg = `*ASADOS DELYPOLLOS*\nFrente al Estadio | 3117700431\n`;
        msg += `--------------------------------\n`;
        msg += `*CLIENTE:* ${n}\n*TEL:* ${t}\n*DIR:* ${d}\n`;
        msg += `*PAGO:* ${pago}\n`;
        if(obs) msg += `*OBS:* ${obs}\n`;
        msg += `--------------------------------\n`;
        msg += `*DETALLE DE FACTURA:*\n`;
        
        let total = 0;
        carrito.forEach(i => {
            let sub = i.precio * i.cantidad;
            total += sub;
            msg += `${i.cantidad}x ${i.nombre}\n`;
            msg += `   ($${i.precio.toLocaleString()} c/u) = $${sub.toLocaleString()}\n`;
        });

        msg += `--------------------------------\n`;
        msg += `*TOTAL A PAGAR: $${total.toLocaleString()}*\n\n`;
        msg += `¬°Muchas gracias por su compra!\n`;
        msg += `_App desarrollada por VIBRAS POSITIVAS_`;

        window.open(`https://wa.me/573117700431?text=${encodeURIComponent(msg)}`);
    }
</script>
</body>
</html>
